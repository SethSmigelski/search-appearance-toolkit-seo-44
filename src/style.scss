.wp-block-seo44-jump-links{
	background-color: var(--seo44-block-bg);
	/* Padding and margin to match default - correct for loading issue - can be superseded by user  */
	padding-top: var(--wp--preset--spacing--30);
  	padding-right: var(--wp--preset--spacing--30);
  	padding-bottom: var(--wp--preset--spacing--30);
  	padding-left: var(--wp--preset--spacing--30);
	margin-top: var(--wp--preset--spacing--30);
  	margin-bottom: var(--wp--preset--spacing--30);
}

/* Style the On This Page Text */
.wp-block-seo44-jump-links-heading{
	/* font-size: calc(var(--jump-link-font-size, 1em) * 1.375); This is no longer necessary with heading selection */
	flex-basis: 100%;
}
/* Keep spacing tight. Good for sticky nav.  Avoid theme conflicts  */
.wp-block-seo44-jump-links nav > ul,
.wp-block-seo44-jump-links nav > ol{
    margin:0;
}
/* Keep spacing tight. Good for sticky nav.  Avoid theme conflicts  */
.wp-block-seo44-jump-links nav > ul li,
.wp-block-seo44-jump-links nav > ol li{
    margin:0;
	padding:0;
	line-height: calc(var(--jump-link-font-size, 1em)*1.75); /* Important for fixing height on sticky */
}

/* Jump Links Block Styles */
.wp-block-seo44-jump-links.list-style-none nav > ul,
.wp-block-seo44-jump-links.list-style-none nav > ol {
    list-style-type: none;
    padding-left: 0;
}

/* Jump Links Block - Horizontal Layout Styles */
.wp-block-seo44-jump-links.is-layout-horizontal ol,
.wp-block-seo44-jump-links.is-layout-horizontal ul {
    list-style-type: none;
    padding: 0;
    margin: -0.5em 0 0; /* negative margin eliminates the top created below to vertically separate li buttons */
    gap: 0em 0.5em;
	display: flex;
	flex-wrap: wrap;
}
/* Jump Links Block - Horizontal li spacing */
.wp-block-seo44-jump-links.is-layout-horizontal ol li,
.wp-block-seo44-jump-links.is-layout-horizontal ul li {
    margin: 0.5em 0 0;
}

.wp-block-seo44-jump-links li a {    
    /* USE THE VARIABLE */
    color: var(--seo44-link-color, #0073aa); /* Fallback to default blue */
}

.wp-block-seo44-jump-links.is-layout-horizontal li a {
    display: inline-block;
    padding: 0.5em 1em;
	text-decoration: none;
	border-width: 1px;     
    border-style: solid;

	/* USE THE VARIABLES */
    background-color: var(--seo44-link-bg);
    border-color: var(--seo44-link-border-color);
    border-radius: var(--seo44-link-radius);
}

.wp-block-seo44-jump-links.is-layout-horizontal li a:hover {
	text-decoration: underline;
	text-underline-offset: .1em;
	background-color: var(--seo44-link-hover-bg); 
}

/* Styling for the Collapsible Feature */
.wp-block-seo44-jump-links.is-collapsible > nav > ul,
.wp-block-seo44-jump-links.is-collapsible > nav > ol {
    /* If horizontal, allow wrapping so we can see the overflow */
    flex-wrap: wrap;
    /* Limit to roughly one line of text height */
    overflow: hidden;
    transition: max-height 0.3s ease-in-out;
}

.wp-block-seo44-jump-links.is-collapsible.is-expanded > nav > ul,
.wp-block-seo44-jump-links.is-collapsible.is-expanded > nav > ol {
    max-height: 1000px; /* A large value to reveal all content */
}

/* The button is hidden by default; our JS shows it only when needed */
.wp-block-seo44-jump-links .seo-44-show-more {
    display: none;
    border: 1px solid currentColor; /*  border: none; */
    border-radius: 4px;
    cursor: pointer;
    padding: 0;
    line-height: 1;
}

.wp-block-seo44-jump-links .seo-44-show-more svg {
    width: 30px;
    height: 30px;
    fill: currentColor;
}

/* Logic to show/hide the correct arrow icon */
.wp-block-seo44-jump-links .seo-44-show-more .arrow-up { display: none; }
.wp-block-seo44-jump-links.is-expanded .seo-44-show-more .arrow-down { display: none; }
.wp-block-seo44-jump-links.is-expanded .seo-44-show-more .arrow-up { display: inline-block; }

/* DYNAMIC COLLAPSED HEIGHTS */
/* Vertical Layout: Collapse to 2 lines */
.wp-block-seo44-jump-links.is-collapsible:not(.is-layout-horizontal) > nav > ul,
.wp-block-seo44-jump-links.is-collapsible:not(.is-layout-horizontal) > nav > ol {
    max-height: calc(var(--jump-link-font-size, 1em)*3.5); /* defined line height of li (font-size * 1.75) * 2 for two lines */
    overflow: hidden;
    transition: max-height 0.3s ease-in-out;
	max-width: calc(100% - 40px);
    display: inline-block;
}
.wp-block-seo44-jump-links.is-collapsible:not(.is-layout-horizontal) .seo-44-show-more{
	vertical-align: top;
    margin-top: calc(var(--jump-link-font-size, 1em) * 1.8);
}
/* Horizontal Layout: Collapse to 1 line */
.wp-block-seo44-jump-links.is-collapsible.is-layout-horizontal > nav > ul,
.wp-block-seo44-jump-links.is-collapsible.is-layout-horizontal > nav > ol {
    max-height: calc(var(--jump-link-font-size, 1em)*1.75 + 1.5em + 2px); /* defined line height of li (font-size * 1.5)  + vertical padding + border thickness */
    overflow: hidden;
    transition: max-height 0.3s ease-in-out;
}

/* Expanded state for both layouts */
.wp-block-seo44-jump-links.is-collapsible.is-expanded > nav > ul,
.wp-block-seo44-jump-links.is-collapsible.is-expanded > nav > ol {
    max-height: 1000px;
}

/* HORIZONTAL LAYOUT: BUTTONS BESIDE LIST */
.wp-block-seo44-jump-links.is-layout-horizontal.is-collapsible > nav {
    display: flex;
    align-items: flex-start;
    gap: 0.5em;
    flex-wrap: wrap;
}

.wp-block-seo44-jump-links.is-layout-horizontal.is-collapsible > nav > ul,
.wp-block-seo44-jump-links.is-layout-horizontal.is-collapsible > nav > ol {
    flex-basis: 0;
    flex-grow: 1;
}

.wp-block-seo44-jump-links.is-layout-horizontal.is-collapsible > nav > .seo-44-show-more {
    flex-shrink: 0;
    margin-top: 0.5em;
}

/* SMART INDENTATION (Visual Hierarchy) */
/* Only apply when not horizontal, as indentation looks bad on buttons */

/* BULLETED LISTS (UL): Use Margin to move bullet + text */
.wp-block-seo44-jump-links:not(.is-layout-horizontal) ul li.seo44-jump-link-level-3 {
    margin-left: 1.5em;
    opacity: 0.9;
}
.wp-block-seo44-jump-links:not(.is-layout-horizontal) ul li.seo44-jump-link-level-4 {
    margin-left: 3em;
    opacity: 0.85;
    list-style-type: circle; /* Change bullet style for hierarchy */
}

/* Override the Level 4 "Circle" bullet when "List Style: None" is selected */
.wp-block-seo44-jump-links.list-style-none nav > ul li.seo44-jump-link-level-4,
.wp-block-seo44-jump-links.list-style-none nav > ol li.seo44-jump-link-level-4 {
    list-style-type: none;
}

/* NUMBERED LISTS (OL): Use Padding to keep numbers aligned, indent text only */
.wp-block-seo44-jump-links:not(.is-layout-horizontal) ol li.seo44-jump-link-level-3 {
    padding-left: 1.5em; /* Indent text only */
    opacity: 0.9;
}
.wp-block-seo44-jump-links:not(.is-layout-horizontal) ol li.seo44-jump-link-level-4 {
    padding-left: 3em; /* Indent text only */
    opacity: 0.85;
    /* Note: list-style-type is not changed, so numbers stay consistent */
}

/* STICKY JUMP LINKS */
.wp-block-seo44-jump-links.is-sticky {
    position: sticky;
    position: -webkit-sticky;
    top: var(--seo44-sticky-offset, 20px);
    z-index: 10;
    /* Optional: Add a slight shadow or background when sticky */
    background-color: var(--seo44-block-bg, #fff); 
}

/* The "Disable on Mobile" Logic */
@media (max-width: 781px) {
    .wp-block-seo44-jump-links.is-sticky.sticky-desktop-only {
        position: static; /* Revert to normal flow */
        top: auto;
    }
}
/* Add scrollspy - active section link is bold and horizontal background */
/* ONLY when the block is stuck and sticky */

/* Base Active Style (Bold text for everyone) */
.wp-block-seo44-jump-links.is-sticky.is-stuck a.is-active {
    font-weight: bold;
    color: var(--seo44-link-color);
}

/* Horizontal-Only Active Style (Background color) */
.wp-block-seo44-jump-links.is-sticky.is-stuck.is-layout-horizontal a.is-active {
    background-color: var(--seo44-link-hover-bg);
    text-decoration: none; /* Optional: remove underline when active */
}

/* Vertical-Only Active Style (Left Border indicator) */
.wp-block-seo44-jump-links.is-sticky.is-stuck:not(.is-layout-horizontal) a.is-active {
    border-left: 3px solid var(--seo44-link-color);
    padding-left: 0.5em;
}

/* COLLAPSING TITLE for sticky */
/* The Sentinel must be absolute so it doesn't affect layout */
.wp-block-seo44-jump-links {
    position: relative; /* Needed for absolute positioning */
}

.seo44-sticky-sentinel {
    position: absolute;
    left: 0;
    right: 0;
    visibility: hidden;
    pointer-events: none;
    /* This is the magic: The sentinel sits at the "sticky threshold" */
    top: calc( (var(--seo44-sticky-offset, 20px) + 3px) * -1 ); 
    height: 1px;
}

/* The "Gentle" Collapse Animation */
.wp-block-seo44-jump-links.is-sticky.is-stuck .wp-block-seo44-jump-links-heading {
    max-height: 0;
    opacity: 0;
    margin: 0;
    overflow: hidden;
    /* Wait 1s, then slide up over 0.5s */
    transition: max-height 0.5s ease 1s, opacity 0.3s ease 1s, margin 0.5s ease 1s;
}

/* Normal State (Not Stuck) */
.wp-block-seo44-jump-links-heading {
    /* Ensure we have a starting max-height for the transition to work */
    max-height: 100px; 
    opacity: 1;
    transition: max-height 0.5s ease, opacity 0.3s ease, margin 0.5s ease;
	margin-top:0; /* Use block spacing instead */
	margin-bottom: 0.25em;
}


/* --- NEW: Text Link Style (Overrides Button Style) --- */
.wp-block-seo44-jump-links.is-layout-horizontal.is-style-text-links li a {
    background-color: transparent !important; /* Force transparent */
    border: none !important;
    padding: 0; /* Reset padding */
    text-decoration: underline; /* Standard link look */
    text-underline-offset: 0.2em;
    color: var(--seo44-link-color);
}
.wp-block-seo44-jump-links.is-layout-horizontal.is-style-text-links li a:hover {
    text-decoration: none;
    color: var(--seo44-link-color); /* Maintain color or darken if you wish */
}

/* --- NEW: Separators --- */
.wp-block-seo44-jump-links.has-separator-space li:not(:last-child):after {
    content: " ";
    margin: 0 0.5em;
    color: currentColor;
    opacity: 0.5;
}

.wp-block-seo44-jump-links.has-separator-dot li:not(:last-child):after {
    content: "Â·";
    font-weight: bold;
    margin: 0 0.5em;
    color: currentColor;
    opacity: 0.6;
}

.wp-block-seo44-jump-links.has-separator-pipe li:not(:last-child):after {
    content: "|";
    margin: 0 0.5em;
    color: currentColor;
    opacity: 0.5;
}

.wp-block-seo44-jump-links.has-separator-slash li:not(:last-child):after {
    content: "/";
    margin: 0 0.5em;
    color: currentColor;
    opacity: 0.5;
}

/* Fix spacing for separators */
.wp-block-seo44-jump-links.is-style-text-links.is-layout-horizontal ul,
.wp-block-seo44-jump-links.is-style-text-links.is-layout-horizontal ol {
    gap: 0; /* Remove gap, rely on separator margins */
}
.wp-block-seo44-jump-links.is-style-text-links.is-layout-horizontal li {
    margin: 0;
}


/* --- NEW: Smart Sticky (Scroll-Up-To-Reveal) --- */

/* 1. Base transition for the "Smart" block */
.wp-block-seo44-jump-links.is-sticky.is-smart-sticky {
    transition: transform 0.3s ease-in-out, top 0.3s ease;
    will-change: transform;
}

/* 2. Hidden State (Applied by JS) */
.wp-block-seo44-jump-links.is-sticky.is-smart-sticky.is-scroll-hidden {
    transform: translateY(-120%); /* Move strictly up out of view */
    pointer-events: none; /* Prevent clicks when hidden */
}

/* 3. Ensure dropdowns/tooltips don't get stuck */
.wp-block-seo44-jump-links.is-sticky.is-smart-sticky.is-scroll-hidden .seo-44-show-more {
    display: none; /* Hide toggle when nav is hidden */
}
